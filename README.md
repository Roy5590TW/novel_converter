# Novel Converter

## English

### Project Purpose and Objectives
This project is a two-stage system designed to convert novel data from JSON format into a browsable static HTML website.

**Stage 1: JSON to Markdown (json2md)**
The first stage focuses on converting raw JSON chapter data into a structured set of Markdown files. It handles:
- Loading and validating JSON input.
- Normalizing chapter titles and content.
- Generating Markdown files with YAML front-matter for each chapter.
- Creating a `config.yaml` template for novel metadata if it doesn't exist.

**Stage 2: Markdown to HTML (md2html / Static Site Generation)**
The second stage takes the Markdown files generated in Stage 1 and builds a static HTML website. It generates:
- Individual HTML pages for each chapter, including navigation.
- Index pages for each novel, listing its chapters.
- A main library index page, listing all available novels.
This stage uses a minimal static site generator to produce browsable content.

### Usage
To use this project, follow these steps:

1.  **Prepare your JSON input files**:
    Place your JSON files, each containing an array of chapter objects (with `title` and `content` keys), into the `inputs/` directory.

    Example `inputs/your_novel.json`:
    ```json
    [
      {
        "title": "Chapter 1: The Beginning",
        "content": "This is the content of chapter one."
      },
      {
        "title": "Chapter 2: The Journey",
        "content": "This is the content of chapter two."
      }
    ]
    ```

2.  **Run the conversion and build script**:
    Execute the `start.sh` script from the project root. This script will:
    -   Process each JSON file in `inputs/` to generate Markdown files in `content/<novel_id>/chapters/`.
    -   Generate or update `config.yaml` in `content/<novel_id>/`.
    -   Build the static HTML site from the `content/` directory into the `output/` directory.
    -   Bring up Docker containers (as defined in `docker-compose.yml`).

    ```bash
    ./start.sh
    ```

3.  **View the output**:
    After successful execution, the static HTML website will be available in the `output/` directory. You can open `output/index.html` in your web browser to browse the generated novel library.

### Project Structure
```
.
├───.gitignore
├───docker-compose.yml
├───Dockerfile
├───inputs/                 # Input JSON files (ignored by .gitignore except .gitkeep)
│   └───.gitkeep
├───content/                # Intermediate Markdown files and config.yaml (ignored by .gitignore)
│   └───<novel_random_id>/
│       ├───config.yaml     # Novel configuration (manual edit)
│       ├───chapters/
│       │   ├───0001.md
│       │   └───...
│       └───index.html      # Novel index page (generated by md2html)
│   └───...
├───output/                 # Generated static HTML website (ignored by .gitignore)
│   └───index.html          # Main library index page
│   └───<novel_random_id>/
│       ├───index.html
│       └───chapters/
│           ├───0001.html
│           └───...
│   └───...
├───src/                    # Source code for the conversion and generation logic
│   ├───json2md.py          # Script for JSON to Markdown conversion
│   ├───loader.py           # Handles loading and validating JSON data
│   ├───normalizer.py       # Normalizes text content
│   ├───formatter.py        # Formats Markdown with front-matter
│   ├───writer.py           # Handles file writing operations
│   └───static_generator/   # Contains static site generation components
│       └───md2html.py      # Script for Markdown to HTML conversion (static site builder)
├───start.sh                # Script to run the entire process
└───.git/
```

---

## 繁體中文 (Traditional Chinese)

### 專案目的與目標
這是一個兩階段的系統，旨在將小說資料從 JSON 格式轉換為可瀏覽的靜態 HTML 網站。

**第一階段：JSON 轉 Markdown (json2md)**
此階段著重於將原始 JSON 章節資料轉換為結構化的 Markdown 文件集。它負責：
- 載入並驗證 JSON 輸入。
- 標準化章節標題和內容。
- 為每個章節生成帶有 YAML 前置資料 (front-matter) 的 Markdown 文件。
- 如果 `config.yaml` 範本不存在，則創建它以供小說元資料使用。

**第二階段：Markdown 轉 HTML (md2html / 靜態網站生成)**
此階段將第一階段生成的 Markdown 文件建構成靜態 HTML 網站。它生成：
- 每個章節的獨立 HTML 頁面，包括導航功能。
- 每部小說的索引頁面，列出其所有章節。
- 主圖書庫索引頁面，列出所有可用的小說。
此階段使用一個簡潔的靜態網站生成器來產生可瀏覽的內容。

### 使用方法
要使用此專案，請遵循以下步驟：

1.  **準備您的 JSON 輸入文件**：
    將您的 JSON 文件（每個文件包含一個章節物件陣列，帶有 `title` 和 `content` 鍵）放入 `inputs/` 目錄中。

    範例 `inputs/您的書名.json`：
    ```json
    [
      {
        "title": "第一章：開端",
        "content": "這是第一章的內容。"
      },
      {
        "title": "第二章：旅程",
        "content": "這是第二章的內容。"
      }
    ]
    ```

2.  **執行轉換和建構腳本**：
    從專案根目錄執行 `start.sh` 腳本。此腳本將會：
    -   處理 `inputs/` 中的每個 JSON 文件，生成 `content/<novel_id>/chapters/` 中的 Markdown 文件。
    -   在 `content/<novel_id>/` 中生成或更新 `config.yaml`。
    -   將 `content/` 目錄中的 Markdown 檔案建構為 `output/` 目錄中的靜態 HTML 網站。
    -   啟動 Docker 容器（依照 `docker-compose.yml` 定義）。

    ```bash
    ./start.sh
    ```

3.  **查看輸出**：
    成功執行後，靜態 HTML 網站將位於 `output/` 目錄中。您可以在網路瀏覽器中打開 `output/index.html` 來瀏覽生成的圖書庫。

### 專案結構
```
.
├───.gitignore
├───docker-compose.yml
├───Dockerfile
├───inputs/                 # 輸入 JSON 文件 (被 .gitignore 忽略，除了 .gitkeep)
│   └───.gitkeep
├───content/                # 中間 Markdown 文件和 config.yaml (被 .gitignore 忽略)
│   └───<novel_random_id>/
│       ├───config.yaml     # 小說配置 (手動編輯)
│       ├───chapters/
│       │   ├───0001.md
│       │   └───...
│       └───index.html      # 小說索引頁 (由 md2html 生成)
│   └───...
├───output/                 # 生成的靜態 HTML 網站 (被 .gitignore 忽略)
│   └───index.html          # 主圖書庫索引頁
│   └───<novel_random_id>/
│       ├───index.html
│       └───chapters/
│           ├───0001.html
│           └───...
│   └───...
├───src/                    # 轉換和生成邏輯的原始碼
│   ├───json2md.py          # JSON 到 Markdown 轉換腳本
│   ├───loader.py           # 處理載入和驗證 JSON 資料
│   ├───normalizer.py       # 標準化文字內容
│   ├───formatter.py        # 格式化帶有前置資料的 Markdown
│   ├───writer.py           # 處理文件寫入操作
│   └───static_generator/   # 包含靜態網站生成組件
│       └───md2html.py      # Markdown 到 HTML 轉換腳本 (靜態網站建構器)
├───start.sh                # 執行整個流程的腳本
└───.git/
```
